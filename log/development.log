Started GET "/" for 127.0.0.1 at 2017-11-10 17:09:38 +0900
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/takumi/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/railties-5.1.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/takumi/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/railties-5.1.3/lib/rails/templates/rails/welcome/index.html.erb (5.7ms)
Completed 200 OK in 434ms (Views: 17.4ms)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddAwesomeNestedSetColumnsToCategories (20171115042013)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "categories" ADD "parent_id" integer[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddAwesomeNestedSetColumnsToCategories (20171115042013)
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "categories" ADD "parent_id" integer[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddAwesomeNestedSetColumnsToCategories (20171115042013)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "categories" ADD "parent_id" integer[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddAwesomeNestedSetColumnsToCategories (20171115042013)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "categories" ADD "parent_id" integer[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddAwesomeNestedSetColumnsToCategories (20171115042013)
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "categories" ADD "parent_id" integer[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddAwesomeNestedSetColumnsToCategories (20171115042013)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "categories" ADD "parent_id" integer[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddAwesomeNestedSetColumnsToCategories (20171115042013)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "categories" ADD "parent_id" integer[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddAwesomeNestedSetColumnsToCategories (20171115042013)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "categories" ADD "parent_id" integer[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateCategories (20171115042530)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "categories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20171115042530"]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddAwesomeNestedSetColumnsToCategories (20171115044735)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "categories" ADD "parent_id" integer[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "categories" ADD "lft" integer[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "categories" ADD "rgt" integer[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE  INDEX "index_categories_on_parent_id" ON "categories" ("parent_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_parent_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_categories_on_lft" ON "categories" ("lft")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_lft' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_lft' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_parent_id' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE  INDEX "index_categories_on_rgt" ON "categories" ("rgt")[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20171115044735"]]
  [1m[35m (3.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-11-15 04:48:37.582351"], ["updated_at", "2017-11-15 04:48:37.582351"]]
  [1m[35m (2.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_rgt' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_rgt' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_lft' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_lft' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_parent_id' AND type='index'
[0m
Started GET "/" for 127.0.0.1 at 2017-11-15 13:50:53 +0900
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/takumi/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/railties-5.1.3/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/takumi/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/railties-5.1.3/lib/rails/templates/rails/welcome/index.html.erb (5.8ms)
Completed 200 OK in 35ms (Views: 18.3ms | ActiveRecord: 0.0ms)


Started GET "/categories" for 127.0.0.1 at 2017-11-15 13:51:12 +0900
Processing by CategoriesController#index as HTML
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant ApplicationRecord::Base):
  
app/models/category.rb:1:in `<top (required)>'
app/controllers/categories_controller.rb:7:in `index'
Started GET "/categories" for 127.0.0.1 at 2017-11-15 13:51:34 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (1.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (6.0ms)
Completed 200 OK in 1676ms (Views: 1643.4ms | ActiveRecord: 2.0ms)


Started GET "/categories/new" for 127.0.0.1 at 2017-11-15 13:53:41 +0900
Processing by CategoriesController#new as HTML
  Rendering categories/new.html.erb within layouts/application
  Rendered categories/_form.html.erb (53.1ms)
  Rendered categories/new.html.erb within layouts/application (60.2ms)
Completed 200 OK in 146ms (Views: 118.2ms | ActiveRecord: 2.0ms)


Started POST "/categories" for 127.0.0.1 at 2017-11-15 13:54:46 +0900
Processing by CategoriesController#create as HTML
  Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"xsuSG6unUkP1Pt8H+GXz5NeyhIQI0dmdwksF7IFpN4sTS9z/w+Rt8jeoO47UC8j12dJjvGzMF91iI0DEi7KE7g==", "category"=>{"name"=>"root"}, "commit"=>"Create Category"}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCACHE Category Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at", "lft", "rgt") VALUES (?, ?, ?, ?, ?)[0m  [["name", "root"], ["created_at", "2017-11-15 04:54:46.124665"], ["updated_at", "2017-11-15 04:54:46.124665"], ["lft", 1], ["rgt", 2]]
  [1m[35m (2.3ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/categories/1
Completed 302 Found in 23ms (ActiveRecord: 3.5ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-11-15 13:54:46 +0900
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering categories/show.html.erb within layouts/application
  Rendered categories/show.html.erb within layouts/application (2.4ms)
Completed 200 OK in 63ms (Views: 45.9ms | ActiveRecord: 0.2ms)


Started GET "/categories" for 127.0.0.1 at 2017-11-15 13:54:48 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (4.9ms)
Completed 200 OK in 50ms (Views: 46.7ms | ActiveRecord: 0.2ms)


Started GET "/categories/1" for 127.0.0.1 at 2017-11-15 13:55:00 +0900
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering categories/show.html.erb within layouts/application
  Rendered categories/show.html.erb within layouts/application (1.3ms)
Completed 200 OK in 35ms (Views: 31.3ms | ActiveRecord: 0.1ms)


Started GET "/categories/1/edit" for 127.0.0.1 at 2017-11-15 13:55:03 +0900
Processing by CategoriesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  Rendering categories/edit.html.erb within layouts/application
  Rendered categories/_form.html.erb (2.1ms)
  Rendered categories/edit.html.erb within layouts/application (6.6ms)
Completed 200 OK in 34ms (Views: 29.5ms | ActiveRecord: 0.1ms)


Started GET "/categories" for 127.0.0.1 at 2017-11-15 13:56:42 +0900
Processing by CategoriesController#index as HTML
Completed 500 Internal Server Error in 10ms


  
NameError (uninitialized constant ApplicationRecord::Base):
  
app/models/category.rb:1:in `<top (required)>'
app/controllers/categories_controller.rb:7:in `index'
Started GET "/categories" for 127.0.0.1 at 2017-11-15 13:59:14 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (17.1ms)
Completed 200 OK in 82ms (Views: 67.3ms | ActiveRecord: 1.2ms)


Started DELETE "/categories/1" for 127.0.0.1 at 2017-11-15 14:01:51 +0900
Processing by CategoriesController#destroy as HTML
  Parameters: {"authenticity_token"=>"bTpHklQx+quvT2z6SVdRmvjNbx8HneywMR+OShZyjjNUcs48CSe6wCue9SFEl70OZUDq25ItzRWs1tQvdYS34w==", "id"=>"1"}
  [1m[36mCategory Load (1.5ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "categories" WHERE ("categories"."lft" >= 1) AND ("categories"."lft" < 2) AND ("categories"."id" != 1)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "categories" SET "lft" = ("lft" - 2) WHERE "categories"."id" IN (SELECT "categories"."id" FROM "categories" WHERE ("categories"."lft" > 2) ORDER BY "categories"."lft")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[33mUPDATE "categories" SET "rgt" = ("rgt" - 2) WHERE "categories"."id" IN (SELECT "categories"."id" FROM "categories" WHERE ("categories"."rgt" > 2) ORDER BY "categories"."lft")[0m
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (2.1ms)[0m  [1m[31mDELETE FROM "categories" WHERE "categories"."id" = ?[0m  [["id", 1]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
Redirected to http://localhost:3000/categories
Completed 302 Found in 43ms (ActiveRecord: 6.6ms)


Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:01:51 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (6.2ms)
Completed 200 OK in 69ms (Views: 61.1ms | ActiveRecord: 0.2ms)


Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:03:11 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 28ms (Views: 25.4ms | ActiveRecord: 0.2ms)


Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:03:13 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 32ms (Views: 29.7ms | ActiveRecord: 0.2ms)


  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at", "lft", "rgt") VALUES (?, ?, ?, ?, ?)[0m  [["name", "root"], ["created_at", "2017-11-15 05:05:39.269793"], ["updated_at", "2017-11-15 05:05:39.269793"], ["lft", 1], ["rgt", 2]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:05:59 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (5.0ms)
Completed 200 OK in 55ms (Views: 50.8ms | ActiveRecord: 0.2ms)


  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at", "parent_id", "lft", "rgt") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "child1"], ["created_at", "2017-11-15 05:06:36.991445"], ["updated_at", "2017-11-15 05:06:36.991445"], ["parent_id", 2], ["lft", 3], ["rgt", 4]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? ORDER BY "categories"."lft" LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[33mUPDATE "categories" SET "lft" = CASE WHEN "lft" BETWEEN 2 AND 2 THEN "lft" + 4 - 2 WHEN "lft" BETWEEN 3 AND 4 THEN "lft" + 2 - 3 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 2 AND 2 THEN "rgt" + 4 - 2 WHEN "rgt" BETWEEN 3 AND 4 THEN "rgt" + 2 - 3 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 3 THEN 2 ELSE "parent_id" END, updated_at = '2017-11-15 05:06:37.003802' WHERE "categories"."id" IN (SELECT "categories"."id" FROM "categories" WHERE ("categories"."lft" BETWEEN 2 AND 4 OR "categories"."rgt" BETWEEN 2 AND 4) ORDER BY "categories"."lft")[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:06:52 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (4.7ms)
Completed 200 OK in 57ms (Views: 53.1ms | ActiveRecord: 0.5ms)


Started GET "/categories/3" for 127.0.0.1 at 2017-11-15 14:07:05 +0900
Processing by CategoriesController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  Rendering categories/show.html.erb within layouts/application
  Rendered categories/show.html.erb within layouts/application (0.7ms)
Completed 200 OK in 28ms (Views: 24.2ms | ActiveRecord: 0.2ms)


  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at", "parent_id", "lft", "rgt") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "grandchild"], ["created_at", "2017-11-15 05:08:09.635010"], ["updated_at", "2017-11-15 05:08:09.635010"], ["parent_id", 3], ["lft", 5], ["rgt", 6]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? ORDER BY "categories"."lft" LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "categories" SET "lft" = CASE WHEN "lft" BETWEEN 3 AND 4 THEN "lft" + 6 - 4 WHEN "lft" BETWEEN 5 AND 6 THEN "lft" + 3 - 5 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 3 AND 4 THEN "rgt" + 6 - 4 WHEN "rgt" BETWEEN 5 AND 6 THEN "rgt" + 3 - 5 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 4 THEN 3 ELSE "parent_id" END, updated_at = '2017-11-15 05:08:09.646175' WHERE "categories"."id" IN (SELECT "categories"."id" FROM "categories" WHERE ("categories"."lft" BETWEEN 3 AND 6 OR "categories"."rgt" BETWEEN 3 AND 6) ORDER BY "categories"."lft")[0m
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.7ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at", "parent_id", "lft", "rgt") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "child2"], ["created_at", "2017-11-15 05:08:27.780665"], ["updated_at", "2017-11-15 05:08:27.780665"], ["parent_id", 2], ["lft", 7], ["rgt", 8]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? ORDER BY "categories"."lft" LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "categories" SET "lft" = CASE WHEN "lft" BETWEEN 6 AND 6 THEN "lft" + 8 - 6 WHEN "lft" BETWEEN 7 AND 8 THEN "lft" + 6 - 7 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 6 AND 6 THEN "rgt" + 8 - 6 WHEN "rgt" BETWEEN 7 AND 8 THEN "rgt" + 6 - 7 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 5 THEN 2 ELSE "parent_id" END, updated_at = '2017-11-15 05:08:27.788215' WHERE "categories"."id" IN (SELECT "categories"."id" FROM "categories" WHERE ("categories"."lft" BETWEEN 6 AND 8 OR "categories"."rgt" BETWEEN 6 AND 8) ORDER BY "categories"."lft")[0m
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:08:35 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (8.9ms)
Completed 200 OK in 63ms (Views: 58.5ms | ActiveRecord: 0.5ms)


  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at", "parent_id", "lft", "rgt") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "child3"], ["created_at", "2017-11-15 05:09:16.846194"], ["updated_at", "2017-11-15 05:09:16.846194"], ["parent_id", 2], ["lft", 9], ["rgt", 10]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? ORDER BY "categories"."lft" LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 6], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "categories" SET "lft" = CASE WHEN "lft" BETWEEN 8 AND 8 THEN "lft" + 10 - 8 WHEN "lft" BETWEEN 9 AND 10 THEN "lft" + 8 - 9 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 8 AND 8 THEN "rgt" + 10 - 8 WHEN "rgt" BETWEEN 9 AND 10 THEN "rgt" + 8 - 9 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 6 THEN 2 ELSE "parent_id" END, updated_at = '2017-11-15 05:09:16.856644' WHERE "categories"."id" IN (SELECT "categories"."id" FROM "categories" WHERE ("categories"."lft" BETWEEN 8 AND 10 OR "categories"."rgt" BETWEEN 8 AND 10) ORDER BY "categories"."lft")[0m
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (3.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at", "parent_id", "lft", "rgt") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "grandchild2"], ["created_at", "2017-11-15 05:09:41.240031"], ["updated_at", "2017-11-15 05:09:41.240031"], ["parent_id", 5], ["lft", 11], ["rgt", 12]]
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? ORDER BY "categories"."lft" LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 7], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "categories" SET "lft" = CASE WHEN "lft" BETWEEN 7 AND 10 THEN "lft" + 12 - 10 WHEN "lft" BETWEEN 11 AND 12 THEN "lft" + 7 - 11 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 7 AND 10 THEN "rgt" + 12 - 10 WHEN "rgt" BETWEEN 11 AND 12 THEN "rgt" + 7 - 11 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 7 THEN 5 ELSE "parent_id" END, updated_at = '2017-11-15 05:09:41.249569' WHERE "categories"."id" IN (SELECT "categories"."id" FROM "categories" WHERE ("categories"."lft" BETWEEN 7 AND 12 OR "categories"."rgt" BETWEEN 7 AND 12) ORDER BY "categories"."lft")[0m
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (2.8ms)[0m  [1m[36mcommit transaction[0m
Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:09:44 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (8.5ms)
Completed 200 OK in 86ms (Views: 81.9ms | ActiveRecord: 0.3ms)


Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:12:04 +0900
Processing by CategoriesController#index as HTML
Completed 500 Internal Server Error in 7ms


  
NameError (uninitialized constant ApplicationRecord::Base):
  
app/models/category.rb:1:in `<top (required)>'
app/controllers/categories_controller.rb:7:in `index'
Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:13:17 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (20.4ms)
Completed 200 OK in 85ms (Views: 73.6ms | ActiveRecord: 2.0ms)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "categories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "parent_id" integer, "lft" integer, "rgt" integer)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX "index_categories_on_lft" ON "categories" ("lft")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_lft' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_lft' AND type='index'
[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE  INDEX "index_categories_on_parent_id" ON "categories" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_parent_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_lft' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_lft' AND type='index'
[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE  INDEX "index_categories_on_rgt" ON "categories" ("rgt")[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20171115044735)[0m
  [1m[35m (8.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20171115042530);

[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-11-15 05:14:08.375089"], ["updated_at", "2017-11-15 05:14:08.375089"]]
  [1m[35m (17.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "categories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "parent_id" integer, "lft" integer, "rgt" integer)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX "index_categories_on_lft" ON "categories" ("lft")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_lft' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_lft' AND type='index'
[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX "index_categories_on_parent_id" ON "categories" ("parent_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_parent_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_lft' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_lft' AND type='index'
[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE  INDEX "index_categories_on_rgt" ON "categories" ("rgt")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (3.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20171115044735)[0m
  [1m[35m (2.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20171115042530);

[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2017-11-15 05:14:08.462582"], ["updated_at", "2017-11-15 05:14:08.462582"]]
  [1m[35m (1.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_rgt' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_rgt' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_parent_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_parent_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_categories_on_lft' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_categories_on_lft' AND type='index'
[0m
Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:14:23 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (3.7ms)
Completed 200 OK in 59ms (Views: 46.5ms | ActiveRecord: 0.7ms)


Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:15:35 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (5.4ms)
Completed 200 OK in 70ms (Views: 55.1ms | ActiveRecord: 0.9ms)


  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35mSQL (2.4ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at", "lft", "rgt") VALUES (?, ?, ?, ?, ?)[0m  [["name", "root"], ["created_at", "2017-11-15 05:16:15.260069"], ["updated_at", "2017-11-15 05:16:15.260069"], ["lft", 1], ["rgt", 2]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:16:31 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (29.1ms)
Completed 200 OK in 83ms (Views: 78.2ms | ActiveRecord: 0.8ms)


  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at", "parent_id", "lft", "rgt") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "child1"], ["created_at", "2017-11-15 05:17:29.824364"], ["updated_at", "2017-11-15 05:17:29.824364"], ["parent_id", 1], ["lft", 3], ["rgt", 4]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? ORDER BY "categories"."lft" LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 2], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "categories" SET "lft" = CASE WHEN "lft" BETWEEN 2 AND 2 THEN "lft" + 4 - 2 WHEN "lft" BETWEEN 3 AND 4 THEN "lft" + 2 - 3 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 2 AND 2 THEN "rgt" + 4 - 2 WHEN "rgt" BETWEEN 3 AND 4 THEN "rgt" + 2 - 3 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 2 THEN 1 ELSE "parent_id" END, updated_at = '2017-11-15 05:17:29.837338' WHERE "categories"."id" IN (SELECT "categories"."id" FROM "categories" WHERE ("categories"."lft" BETWEEN 2 AND 4 OR "categories"."rgt" BETWEEN 2 AND 4) ORDER BY "categories"."lft")[0m
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 2], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:17:43 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.5ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (3.7ms)
Completed 200 OK in 63ms (Views: 59.1ms | ActiveRecord: 0.5ms)


  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.6ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at", "parent_id", "lft", "rgt") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "child2"], ["created_at", "2017-11-15 05:18:04.635859"], ["updated_at", "2017-11-15 05:18:04.635859"], ["parent_id", 1], ["lft", 5], ["rgt", 6]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? ORDER BY "categories"."lft" LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 3], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "categories" SET "lft" = CASE WHEN "lft" BETWEEN 4 AND 4 THEN "lft" + 6 - 4 WHEN "lft" BETWEEN 5 AND 6 THEN "lft" + 4 - 5 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 4 AND 4 THEN "rgt" + 6 - 4 WHEN "rgt" BETWEEN 5 AND 6 THEN "rgt" + 4 - 5 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 3 THEN 1 ELSE "parent_id" END, updated_at = '2017-11-15 05:18:04.646483' WHERE "categories"."id" IN (SELECT "categories"."id" FROM "categories" WHERE ("categories"."lft" BETWEEN 4 AND 6 OR "categories"."rgt" BETWEEN 4 AND 6) ORDER BY "categories"."lft")[0m
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (3.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCategory Load (0.7ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" ORDER BY "categories"."rgt" desc LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "categories" ("name", "created_at", "updated_at", "parent_id", "lft", "rgt") VALUES (?, ?, ?, ?, ?, ?)[0m  [["name", "grandchild1"], ["created_at", "2017-11-15 05:18:27.809318"], ["updated_at", "2017-11-15 05:18:27.809318"], ["parent_id", 2], ["lft", 7], ["rgt", 8]]
  [1m[36mCategory Load (0.2ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? ORDER BY "categories"."lft" LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 4], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[33mUPDATE "categories" SET "lft" = CASE WHEN "lft" BETWEEN 3 AND 6 THEN "lft" + 8 - 6 WHEN "lft" BETWEEN 7 AND 8 THEN "lft" + 3 - 7 ELSE "lft" END, "rgt" = CASE WHEN "rgt" BETWEEN 3 AND 6 THEN "rgt" + 8 - 6 WHEN "rgt" BETWEEN 7 AND 8 THEN "rgt" + 3 - 7 ELSE "rgt" END, "parent_id" = CASE WHEN "id" = 4 THEN 2 ELSE "parent_id" END, updated_at = '2017-11-15 05:18:27.822057' WHERE "categories"."id" IN (SELECT "categories"."id" FROM "categories" WHERE ("categories"."lft" BETWEEN 3 AND 8 OR "categories"."rgt" BETWEEN 3 AND 8) ORDER BY "categories"."lft")[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."id" = ? LIMIT ? [0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (3.0ms)[0m  [1m[36mcommit transaction[0m
Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:18:30 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.4ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (3.6ms)
Completed 200 OK in 60ms (Views: 54.4ms | ActiveRecord: 0.4ms)


Started GET "/categories" for 127.0.0.1 at 2017-11-15 14:19:29 +0900
Processing by CategoriesController#index as HTML
  Rendering categories/index.html.erb within layouts/application
  [1m[36mCategory Load (0.1ms)[0m  [1m[34mSELECT "categories".* FROM "categories"[0m
  Rendered categories/index.html.erb within layouts/application (24.3ms)
Completed 200 OK in 85ms (Views: 72.5ms | ActiveRecord: 1.5ms)


  [1m[36mCategory Load (4.0ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."parent_id" = ? ORDER BY "categories"."lft" LIMIT ?[0m  [["parent_id", 1], ["LIMIT", 11]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "categories" WHERE ("categories"."lft" <= 2) AND ("categories"."rgt" >= 3) AND ("categories"."id" != 2)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "categories" WHERE ("categories"."lft" <= 3) AND ("categories"."rgt" >= 4) AND ("categories"."id" != 4)[0m
  [1m[36mCategory Load (0.6ms)[0m  [1m[34mSELECT  "categories".* FROM "categories" WHERE "categories"."parent_id" = ? ORDER BY "categories"."lft" LIMIT ?[0m  [["parent_id", 2], ["LIMIT", 11]]
